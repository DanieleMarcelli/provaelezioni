<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Avigliano Umbro ‚Äî Promesso. Fatto.</title>
    <meta
      name="description"
      content="Rendiconto trasparente 2021-2027. Promesse mantenute, opere realizzate, numeri verificabili."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav class="nav" id="nav">
      <div class="nav-inner">
        <a href="#" class="nav-brand"
          ><span class="nav-brand-name">Avigliano</span
          ><span class="nav-brand-tag">2027</span></a
        >
        <div class="nav-links">
          <a href="#numeri" class="nav-link">Numeri</a
          ><a href="#opere" class="nav-link">Opere</a
          ><a href="#promesse" class="nav-link">Promesse</a
          ><a href="#mappa" class="nav-link">Mappa</a
          ><a href="#cantieri" class="nav-link">Cantieri</a
          ><a href="#domani" class="nav-link">Domani</a
          ><a href="#chi-sono" class="nav-link">Chi sono</a>
        </div>
        <div style="display: flex; gap: 12px; align-items: center">
          <button id="admin-btn" class="nav-admin">‚öôÔ∏è</button
          ><button id="menu-btn" class="nav-burger">‚ò∞</button>
        </div>
      </div>
    </nav>

    <div class="mob-menu" id="mob-menu">
      <button id="mob-close" class="mob-close">‚úï</button>
      <div class="mob-links">
        <a href="#numeri" class="mob-link">Numeri</a
        ><a href="#opere" class="mob-link">Opere</a
        ><a href="#promesse" class="mob-link">Promesse</a
        ><a href="#mappa" class="mob-link">Mappa</a
        ><a href="#cantieri" class="mob-link">Cantieri</a
        ><a href="#domani" class="mob-link">Domani</a
        ><a href="#chi-sono" class="mob-link">Chi sono</a>
      </div>
    </div>

    <section class="hero" id="hero">
      <div class="hero-grid"></div>
      <div class="hero-line" style="top: 25%"></div>
      <div class="hero-line" style="top: 75%"></div>
      <div class="hero-content">
        <p class="hero-pre reveal">Rendiconto 2021 ‚Äî 2027</p>
        <h1 class="reveal">Promesso.<br /><em>Fatto.</em></h1>
        <p class="hero-sub reveal">
          Tutto quello che ci eravamo impegnati a fare. Tutto quello che abbiamo
          realizzato. Trasparenza con i numeri, non con gli slogan.
        </p>
        <div class="hero-cta reveal">
          <a href="#numeri" class="btn-gold">Scopri i risultati</a
          ><a href="#domani" class="btn-outline">Priorit√† del domani</a>
        </div>
        <div class="hero-stat-bar reveal" id="hero-stats"></div>
      </div>
      <div class="hero-scroll">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M7 13l5 5 5-5M7 7l5 5 5-5" />
        </svg>
      </div>
    </section>

    <section id="numeri" class="sect">
      <div class="wrap">
        <div class="sect-header reveal">
          <p class="t-label">Il rendiconto in numeri</p>
          <h2 class="t-title">Dashboard del programma</h2>
          <div class="sect-divider" style="margin-top: 20px"></div>
        </div>
        <div id="kpi-grid" class="grid-kpi reveal"></div>
        <div class="text-center" style="margin-top: 36px">
          <button
            id="how-calc-btn"
            style="
              background: none;
              border: none;
              color: var(--gold);
              font-size: 12px;
              font-weight: 600;
              cursor: pointer;
              letter-spacing: 0.06em;
              text-transform: uppercase;
            "
          >
            Come calcoliamo questi numeri ‚Üí
          </button>
        </div>
      </div>
    </section>

    <section id="opere" class="sect" style="background: var(--bg-2)">
      <div class="wrap">
        <div class="sect-header reveal">
          <p class="t-label">Vedere per credere</p>
          <h2 class="t-title">Prima / Dopo</h2>
          <p class="t-sub">
            Le trasformazioni sul territorio. Trascina il cursore per
            confrontare.
          </p>
        </div>
        <div
          id="opere-filters"
          style="
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 36px;
          "
          class="reveal"
        ></div>
        <div id="opere-grid" class="grid-opere reveal"></div>
        <p
          id="opere-empty"
          style="
            display: none;
            text-align: center;
            color: var(--text-3);
            padding: 80px 0;
            font-size: 14px;
          "
        >
          Le foto verranno caricate dall'admin ‚öôÔ∏è ‚Üí Progetti ‚Üí üì∑
        </p>
      </div>
    </section>

    <section id="promesse" class="sect">
      <div class="wrap">
        <div class="sect-header reveal">
          <p class="t-label">Cuore del rendiconto</p>
          <h2 class="t-title">Promesse vs Risultati</h2>
        </div>
        <div
          class="reveal"
          style="
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 24px;
            align-items: center;
          "
        >
          <div style="position: relative; flex: 1; min-width: 220px">
            <svg
              class="search-icon"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.35-4.35" /></svg
            ><input
              id="search-input"
              type="text"
              class="search-box"
              placeholder="Cerca promesse o risultati..."
            />
          </div>
          <select id="f-loc" class="filter-select">
            <option value="">Tutte le localit√†</option>
            <option>Avigliano</option>
            <option>Sismano</option>
            <option>Santa Restituta</option>
            <option>Toscolano</option>
            <option>Dunarobba</option>
            <option>Tutto il territorio</option>
          </select>
          <select id="f-stato" class="filter-select">
            <option value="">Tutti gli stati</option>
            <option value="concluso">Conclusi</option>
            <option value="in_corso">In corso</option>
          </select>
          <select id="f-tipo" class="filter-select">
            <option value="">Tutti i tipi</option>
            <option value="opera">üèóÔ∏è Opere</option>
            <option value="servizio">üü¢ Servizi</option>
            <option value="azione">üìã Azioni</option>
          </select>
        </div>
        <div
          id="area-tabs"
          style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 28px"
          class="reveal"
        ></div>
        <div id="promise-list" class="reveal"></div>
      </div>
    </section>

    <section id="mappa" class="sect" style="background: var(--bg-2)">
      <div class="wrap">
        <div class="sect-header reveal">
          <p class="t-label">Sul territorio</p>
          <h2 class="t-title">Mappa degli interventi</h2>
        </div>
        <div
          id="map-filters"
          style="
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
          "
          class="reveal"
        ></div>
        <div id="map-container" style="height: 480px" class="reveal"></div>
      </div>
    </section>

    <section id="cantieri" class="sect">
      <div class="wrap">
        <div class="sect-header reveal">
          <p class="t-label">Work in progress</p>
          <h2 class="t-title">Cantieri aperti</h2>
        </div>
        <div id="wip-grid" class="grid-wip reveal"></div>
      </div>
    </section>

    <section
      id="domani"
      class="sect"
      style="
        background: var(--bg-2);
        border-top: 1px solid var(--border);
        border-bottom: 1px solid var(--border);
      "
    >
      <div class="wrap" style="max-width: 1000px">
        <div class="sect-header reveal">
          <p class="t-label">Programma partecipato</p>
          <h2 class="t-title">Le priorit√† del domani</h2>
          <p class="t-sub">
            Scegli da 1 a 3 priorit√†. Il voto √® anonimo e locale.
          </p>
        </div>
        <div id="vote-grid" class="grid-vote reveal"></div>
        <div class="text-center" style="margin-top: 32px">
          <button
            id="vote-results-btn"
            style="
              background: none;
              border: none;
              color: var(--gold);
              font-size: 12px;
              font-weight: 600;
              cursor: pointer;
              letter-spacing: 0.06em;
              text-transform: uppercase;
            "
          >
            Vedi risultati parziali ‚Üí
          </button>
        </div>
        <div
          id="vote-results"
          style="display: none; max-width: 500px; margin: 32px auto 0"
        ></div>
      </div>
    </section>

    <section id="chi-sono" class="sect">
      <div class="wrap" style="max-width: 800px">
        <div class="sect-header reveal">
          <p class="t-label">Il percorso</p>
          <h2 class="t-title">Daniele Marcelli</h2>
        </div>
        <div
          class="reveal"
          style="
            display: flex;
            gap: 56px;
            align-items: flex-start;
            flex-wrap: wrap;
          "
        >
          <div style="flex: 1; min-width: 280px">
            <p
              style="
                color: var(--text-2);
                line-height: 1.85;
                font-size: 15px;
                margin-bottom: 40px;
              "
            >
              Vicesindaco di Avigliano Umbro dal 2021. Collaboratore regionale.
              Impegnato nello sviluppo del territorio, nella trasparenza
              amministrativa e nella valorizzazione delle risorse locali.
            </p>
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-dot" style="background: var(--gold)"></div>
                <p style="font-weight: 700; color: var(--white)">
                  Consigliere Comunale
                </p>
                <p
                  style="font-size: 13px; color: var(--text-3); margin-top: 4px"
                >
                  Primo impegno istituzionale
                </p>
              </div>
              <div class="timeline-item">
                <div class="timeline-dot" style="background: var(--gold)"></div>
                <p style="font-weight: 700; color: var(--white)">
                  Vice Sindaco (2021 ‚Äî oggi)
                </p>
                <p
                  style="font-size: 13px; color: var(--text-3); margin-top: 4px"
                >
                  Gestione operativa, fondi, opere
                </p>
              </div>
              <div class="timeline-item">
                <div class="timeline-dot" style="background: var(--cyan)"></div>
                <p style="font-weight: 700; color: var(--white)">
                  Candidato 2027
                </p>
                <p
                  style="font-size: 13px; color: var(--text-3); margin-top: 4px"
                >
                  Continuit√† e nuove sfide
                </p>
              </div>
            </div>
          </div>
          <div
            style="
              width: 240px;
              height: 320px;
              background: var(--bg-3);
              border: 1px solid var(--border);
              border-radius: var(--r);
              display: flex;
              align-items: center;
              justify-content: center;
              color: var(--text-3);
              font-size: 13px;
              flex-shrink: 0;
            "
          >
            Foto profilo
          </div>
        </div>
      </div>
    </section>

    <section
      id="faq"
      class="sect"
      style="padding: 80px 0; background: var(--bg-2)"
    >
      <div class="wrap" style="max-width: 680px">
        <div class="sect-header reveal">
          <p class="t-label">Domande frequenti</p>
          <h2 class="t-title">FAQ</h2>
        </div>
        <div
          class="reveal"
          id="faq-list"
          style="display: flex; flex-direction: column; gap: 10px"
        ></div>
        <div class="reveal text-center" style="margin-top: 64px">
          <h3
            style="
              font-family: &quot;Playfair Display&quot;, serif;
              font-size: 1.6rem;
              color: var(--white);
              margin-bottom: 16px;
            "
          >
            Contatti
          </h3>
          <p style="color: var(--text-3); font-size: 15px; margin-bottom: 28px">
            Scrivi, segnala, proponi.
          </p>
          <div
            style="
              display: flex;
              gap: 14px;
              justify-content: center;
              flex-wrap: wrap;
            "
          >
            <a
              href="mailto:info@aviglianoumbro2027.it"
              class="btn-gold"
              style="padding: 14px 32px; font-size: 13px"
              >Email</a
            ><a
              href="#"
              class="btn-outline"
              style="padding: 14px 32px; font-size: 13px"
              >WhatsApp</a
            >
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="wrap footer-inner">
        <div>
          <span class="footer-brand">Avigliano</span
          ><span class="footer-tag">2027</span>
          <p style="font-size: 12px; margin-top: 6px">
            Rendiconto trasparente 2021‚Äì2027
          </p>
        </div>
        <div style="font-size: 12px; text-align: right">
          <p>"Avigliano ‚Äì prima di tutto"</p>
          <p style="margin-top: 4px">Aggiornamento: febbraio 2026</p>
        </div>
      </div>
    </footer>

    <div class="lightbox" id="lightbox" onclick="this.classList.remove('open')">
      <button class="lightbox-close">‚úï</button
      ><img id="lightbox-img" src="" alt="" />
    </div>
    <div
      id="modal-calc"
      style="
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 24px;
      "
    >
      <div
        style="
          background: var(--bg-2);
          border: 1px solid var(--border);
          border-radius: var(--r);
          max-width: 480px;
          width: 100%;
          padding: 36px;
          position: relative;
        "
      >
        <button
          onclick="document.getElementById('modal-calc').style.display='none'"
          style="
            position: absolute;
            top: 14px;
            right: 18px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-3);
          "
        >
          ‚úï
        </button>
        <h3
          style="
            font-family: &quot;Playfair Display&quot;, serif;
            font-size: 1.5rem;
            color: var(--white);
            margin-bottom: 16px;
          "
        >
          Come calcoliamo
        </h3>
        <p style="font-size: 14px; color: var(--text-2); line-height: 1.75">
          Ogni promessa del programma 2021 √® codificata e abbinata ai risultati.
          Una promessa √® "coperta" quando ha almeno un progetto collegato. Gli
          importi si riferiscono ai dati verificabili.
        </p>
      </div>
    </div>

    <div class="admin-overlay" id="admin-overlay"></div>
    <div class="admin-panel" id="admin-panel">
      <div style="padding: 36px">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
          "
        >
          <h3
            style="
              font-family: &quot;Playfair Display&quot;, serif;
              font-size: 1.5rem;
              color: var(--white);
            "
          >
            Admin
          </h3>
          <button
            id="close-admin"
            style="
              background: none;
              border: none;
              font-size: 24px;
              cursor: pointer;
              color: var(--text-3);
            "
          >
            ‚úï
          </button>
        </div>
        <div id="admin-login">
          <label class="admin-label">Password</label
          ><input
            id="admin-pw"
            type="password"
            class="admin-input"
            style="margin-bottom: 14px"
            placeholder="Password"
          /><button id="admin-login-btn" class="admin-btn">Accedi</button>
        </div>
        <div id="admin-main" style="display: none">
          <div
            style="
              display: flex;
              gap: 8px;
              margin-bottom: 24px;
              flex-wrap: wrap;
            "
            id="admin-tabs"
          >
            <button class="pill active" data-tab="a-projects">Progetti</button
            ><button class="pill" data-tab="a-promises">Promesse</button
            ><button class="pill" data-tab="a-data">Import/Export</button>
          </div>
          <div id="a-projects">
            <button
              id="add-proj-btn"
              class="admin-btn"
              style="margin-bottom: 16px"
            >
              + Nuovo Progetto
            </button>
            <div style="margin-bottom: 14px">
              <input
                id="admin-search"
                class="admin-input"
                placeholder="Cerca nei progetti..."
              />
            </div>
            <div
              id="admin-proj-list"
              style="
                max-height: 50vh;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                gap: 8px;
              "
            ></div>
          </div>
          <div id="a-promises" style="display: none">
            <p
              style="font-size: 13px; color: var(--text-3); margin-bottom: 14px"
            >
              Promesse dal programma elettorale.
            </p>
            <div
              id="admin-prom-list"
              style="
                max-height: 55vh;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                gap: 8px;
              "
            ></div>
          </div>
          <div id="a-data" style="display: none">
            <div style="display: flex; flex-direction: column; gap: 12px">
              <button
                id="export-btn"
                class="admin-btn"
                style="
                  background: var(--bg-card);
                  color: var(--text);
                  border: 1px solid var(--border);
                "
              >
                üì• Esporta JSON</button
              ><label
                class="admin-btn"
                style="
                  background: var(--bg-card);
                  color: var(--text);
                  border: 1px solid var(--border);
                  text-align: center;
                  cursor: pointer;
                  display: block;
                "
                >üì§ Importa JSON<input
                  type="file"
                  id="import-input"
                  accept=".json"
                  style="display: none" /></label
              ><button
                id="reset-btn"
                class="admin-btn"
                style="
                  background: rgba(240, 96, 136, 0.08);
                  color: var(--rose);
                  border: 1px solid rgba(240, 96, 136, 0.2);
                "
              >
                üóë Reset
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="proj-modal"
      style="
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 10002;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 16px;
      "
    >
      <div
        style="
          background: var(--bg-2);
          border: 1px solid var(--border);
          border-radius: var(--r);
          max-width: 520px;
          width: 100%;
          max-height: 90vh;
          overflow-y: auto;
          padding: 32px;
          position: relative;
        "
      >
        <button
          class="close-proj"
          style="
            position: absolute;
            top: 14px;
            right: 18px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-3);
          "
        >
          ‚úï
        </button>
        <h3
          style="
            font-family: &quot;Playfair Display&quot;, serif;
            font-size: 1.25rem;
            color: var(--white);
            margin-bottom: 20px;
          "
          id="proj-modal-title"
        >
          Nuovo Progetto
        </h3>
        <form
          id="proj-form"
          style="display: flex; flex-direction: column; gap: 12px"
        >
          <input type="hidden" id="pf-id" />
          <div>
            <label class="admin-label">Titolo*</label
            ><input id="pf-titolo" class="admin-input" required />
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px">
            <div>
              <label class="admin-label">Area</label
              ><select id="pf-area" class="admin-input">
                <option value="1">1‚ÄìSociale</option>
                <option value="2">2‚ÄìCultura</option>
                <option value="3">3‚ÄìOpere</option>
                <option value="4">4‚ÄìAmbiente</option>
                <option value="5">5‚ÄìServizi</option>
              </select>
            </div>
            <div>
              <label class="admin-label">Tipo</label
              ><select id="pf-tipo" class="admin-input">
                <option value="opera">üèóÔ∏è Opera</option>
                <option value="servizio">üü¢ Servizio</option>
                <option value="azione">üìã Azione</option>
              </select>
            </div>
          </div>
          <div>
            <label class="admin-label">Descrizione</label
            ><textarea
              id="pf-desc"
              rows="2"
              class="admin-input"
              style="resize: vertical"
            ></textarea>
          </div>
          <div>
            <label class="admin-label">Impatto</label
            ><input
              id="pf-impatto"
              class="admin-input"
              placeholder="Es: 28.867‚Ç¨ nel commercio locale"
            />
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px">
            <div>
              <label class="admin-label">Localit√†</label
              ><select id="pf-loc" class="admin-input">
                <option>Avigliano</option>
                <option>Sismano</option>
                <option>Santa Restituta</option>
                <option>Toscolano</option>
                <option>Dunarobba</option>
                <option>Tutto il territorio</option>
              </select>
            </div>
            <div>
              <label class="admin-label">Anno</label
              ><input id="pf-anno" class="admin-input" placeholder="2024" />
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px">
            <div>
              <label class="admin-label">Stato</label
              ><select id="pf-stato" class="admin-input">
                <option value="concluso">Concluso</option>
                <option value="in_corso">In corso</option>
                <option value="programmato">Programmato</option>
              </select>
            </div>
            <div>
              <label class="admin-label">Importo ‚Ç¨</label
              ><input id="pf-importo" type="number" class="admin-input" />
            </div>
          </div>
          <div>
            <label class="admin-label">Fonte</label
            ><input
              id="pf-fonte"
              class="admin-input"
              placeholder="Comune / Regione / PNRR..."
            />
          </div>
          <div>
            <label class="admin-label">Promesse collegate</label
            ><input id="pf-prom" class="admin-input" placeholder="P01,P02" />
          </div>
          <div>
            <label class="admin-label">Link atto</label
            ><input id="pf-link" class="admin-input" />
          </div>
          <div id="pf-photo-section">
            <p
              style="
                font-size: 12px;
                font-weight: 700;
                color: var(--text-2);
                margin: 10px 0 8px;
                text-transform: uppercase;
                letter-spacing: 0.06em;
              "
            >
              üì∑ Foto prima/dopo
            </p>
            <div
              style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px"
            >
              <div>
                <label
                  style="
                    font-size: 11px;
                    font-weight: 600;
                    color: var(--text-3);
                  "
                  >Foto PRIMA</label
                ><input
                  type="file"
                  id="pf-prima"
                  accept="image/*"
                  multiple
                  style="font-size: 12px; margin-top: 6px; color: var(--text-2)"
                />
                <div
                  id="pf-prima-prev"
                  style="
                    display: flex;
                    gap: 4px;
                    flex-wrap: wrap;
                    margin-top: 8px;
                  "
                ></div>
              </div>
              <div>
                <label
                  style="font-size: 11px; font-weight: 600; color: var(--green)"
                  >Foto DOPO</label
                ><input
                  type="file"
                  id="pf-dopo"
                  accept="image/*"
                  multiple
                  style="font-size: 12px; margin-top: 6px; color: var(--text-2)"
                />
                <div
                  id="pf-dopo-prev"
                  style="
                    display: flex;
                    gap: 4px;
                    flex-wrap: wrap;
                    margin-top: 8px;
                  "
                ></div>
              </div>
            </div>
            <div style="margin-top: 10px">
              <label class="admin-label">Note confronto</label
              ><input
                id="pf-note"
                class="admin-input"
                placeholder="Es: rifatta pavimentazione"
              />
            </div>
          </div>
          <button type="submit" class="admin-btn" style="margin-top: 10px">
            üíæ Salva progetto
          </button>
        </form>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
  </body>
</html>
